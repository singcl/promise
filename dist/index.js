function Promise(e){var n=this;function o(t){setTimeout(function(){if("pending"===n.status){n.status="rejected",n.data=t;for(var e=0;e<n.onRejectedCallback.length;e++)n.onRejectedCallback[e](t)}},0)}n.status="pending",n.data=void 0,n.onResolvedCallback=[],n.onRejectedCallback=[];try{e(function e(t){if(t instanceof Promise)return t.then(e,o);setTimeout(function(){if("pending"===n.status){n.status="resolved",n.data=t;for(var e=0;e<n.onResolvedCallback.length;e++)n.onResolvedCallback[e](t)}},0)},o)}catch(e){o(e)}}function resolvePromise(t,e,n,o){var r,i;if(t!==e)if(e instanceof Promise)"pending"===e.status?e.then(function(e){resolvePromise(t,e,n,o)},o):e.then(n,o);else if(null===e||"object"!=typeof e&&"function"!=typeof e)n(e);else try{"function"==typeof(r=e.then)?r.call(e,function(e){if(!i)return i=!0,resolvePromise(t,e,n,o)},function(e){if(!i)return i=!0,o(e)}):n(e)}catch(e){if(i)return;return i=!0,o(e)}else o(new TypeError("Chaining cycle detected for promise!"))}Promise.prototype.then=function(r,i){var s,c=this;return r="function"==typeof r?r:function(e){return e},i="function"==typeof i?i:function(e){throw e},"pending"===c.status?s=new Promise(function(n,o){c.onResolvedCallback.push(function(e){try{var t=r(e);resolvePromise(s,t,n,o)}catch(e){o(e)}}),c.onRejectedCallback.push(function(e){try{var t=i(e);resolvePromise(s,t,n,o)}catch(e){o(e)}})}):"resolved"===c.status?s=new Promise(function(t,n){setTimeout(function(){try{var e=r(c.data);resolvePromise(s,e,t,n)}catch(e){n(e)}},0)}):"rejected"===c.status?s=new Promise(function(t,n){setTimeout(function(){try{var e=i(c.data);resolvePromise(s,e,t,n)}catch(e){n(e)}},0)}):void 0},Promise.prototype.catch=function(e){return this.then(null,e)},module.exports=Promise;